# 🔒 セキュリティチェックリスト

## ⚠️ 絶対にやってはいけないこと

- ❌ `.env` ファイルを Git にコミット
- ❌ パスワードをコードに直接書く
- ❌ APIキーを公開リポジトリに含める
- ❌ データベースの秘密情報をスクリーンショットに含める
- ❌ 機密情報を AI に見せる（Claude含む）
- ❌ 本番環境の URL やドメインを公開する

---

## ✅ デプロイ前のチェック

### Git管理
- [ ] `.gitignore` が作成されている
- [ ] `.env` ファイルが Git に追跡されていない
- [ ] `node_modules/` が Git に追跡されていない
- [ ] `database.sqlite` が Git に追跡されていない

**確認方法：**
```bash
git status
# .env や database.sqlite が表示されないことを確認
```

### 環境変数
- [ ] `.env.production` を作成した
- [ ] すべてのプレースホルダーを実際の値に書き換えた
- [ ] `JWT_SECRET` が64文字以上のランダム文字列
- [ ] データベースパスワードが強力（英数字+記号）
- [ ] Google Service Account の秘密鍵が正しい

### データベース
- [ ] 本番環境では PostgreSQL を使用
- [ ] データベースのバックアップ体制がある
- [ ] データベースへのアクセスが制限されている

### CORS設定
- [ ] 本番フロントエンドのドメインのみ許可
- [ ] `*`（すべて許可）になっていない

### HTTPS
- [ ] 本番環境でHTTPSを使用
- [ ] APIも HTTPSで通信

---

## 🔍 デプロイ後のチェック

### セキュリティテスト
- [ ] 未認証でアクセスできないページがないか
- [ ] 他人のデータが見えないか
- [ ] SQLインジェクション対策ができているか
- [ ] XSS対策ができているか

### ログの確認
- [ ] エラーログにパスワードが出力されていない
- [ ] エラーログにAPIキーが出力されていない
- [ ] 本番環境で不要なログが出ていない

---

## 🚨 情報漏洩時の対応

もし `.env` や秘密情報を誤って Git にコミットした場合：

1. **すぐに秘密情報を変更**
   - JWT_SECRET を再生成
   - データベースパスワードを変更
   - APIキーを再発行

2. **Git の履歴から削除**
   ```bash
   # 専門家に相談してください！
   # git filter-branch は危険な操作です
   ```

3. **先生やチームリーダーに報告**

---

## 📝 AI（Claude等）を使う時の注意

### ✅ 見せて良い情報
- コードの構造（ロジック）
- エラーメッセージ（個人情報を削除したもの）
- パッケージ構成
- 「こういう機能を作りたい」という質問

### ❌ 絶対に見せてはいけない情報
- `.env` ファイルの中身
- パスワード
- APIキー、トークン
- JWT_SECRET
- データベース接続情報
- Google Service Account の秘密鍵
- ユーザーの個人情報
- 本番環境のURL

### 🛡️ 安全な使い方
1. テンプレートだけ作ってもらう
2. 自分で値を書き換える
3. 書き換えた後は AI に見せない
4. 「このファイル見て」と言わない

---

## 💡 覚えておくこと

> **「マクドで隣の人に聞かれてはいけない内容は、AIにも教えない」**

これを守れば安全です！ 🎯
